:root{
  --pink:#ff6fb1;
  --pink2:#ffa7cc;
  --bg1:#120818;
  --bg2:#2a0d2f;
  --white:#fff;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--white);
  overflow:hidden;
}

/* pages */
.page{
  position:absolute; inset:0;
  display:grid; place-items:center;
  opacity:0; pointer-events:none;
  transform:scale(1.02);
  transition:opacity .7s ease, transform .7s ease;
}
.page.active{
  opacity:1; pointer-events:auto;
  transform:scale(1);
}

/* ---------- PAGE 1 ---------- */
#page1{
  background: radial-gradient(1200px 600px at 50% 20%, #3b1140 0%, var(--bg1) 60%, #07040a 100%);
}
.bg-glow{
  position:absolute; inset:-20%;
  background:
    radial-gradient(closest-side at 30% 30%, rgba(255,167,204,.25), transparent 60%),
    radial-gradient(closest-side at 70% 60%, rgba(255,111,177,.18), transparent 60%);
  filter: blur(20px);
}
.envelope-wrap{
  position:relative;
  width:min(420px, 92vw);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
  z-index:2;
}

.envelope{
  position:relative;
  width:320px;
  height:210px;
  transform: translateY(0);
  transition: transform .8s ease;
  will-change: transform;
}
.envelope-back{
  position:absolute; inset:0;
  background: linear-gradient(180deg, #ffd6e8, #ffb9d7);
  border-radius:18px;
  box-shadow: 0 18px 60px rgba(0,0,0,.35);
}
.envelope-front{
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,0));
  border-radius:18px;
  border:1px solid rgba(255,255,255,.25);
}
.envelope-flap{
  position:absolute;
  left:0; right:0; top:0;
  height:55%;
  background: linear-gradient(180deg, #ff9fcb, #ff6fb1);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  transform-origin: top;
  border-top-left-radius:18px;
  border-top-right-radius:18px;
  transition: transform .8s ease;
}
.envelope-letter{
  position:absolute;
  left:18px; right:18px; top:18px; bottom:18px;
  background: rgba(255,255,255,.92);
  color:#3a0d2f;
  border-radius:14px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:6px;
  transform: translateY(25px);
  transition: transform .8s ease, opacity .8s ease;
  opacity: .92;
}
.envelope-letter .date{
  font-weight:800;
  font-size:28px;
  letter-spacing:.12em;
}
.envelope-letter .small{
  opacity:.75;
}

/* ribbon button
.ribbon-btn{
  position:relative;
  border:none;
  background:transparent;
  cursor:pointer;
  padding:0;
  transform: translateY(0);
  transition: transform .2s ease;
}
.ribbon-btn:hover{transform: translateY(-2px)}
.ribbon-center{
  display:inline-block;
  padding:14px 22px;
  background: linear-gradient(180deg, var(--pink2), var(--pink));
  color:#2b0423;
  font-weight:900;
  border-radius:14px;
  box-shadow: 0 14px 40px rgba(255,111,177,.25);
}
.ribbon-left,.ribbon-right{
  position:absolute; top:50%;
  width:26px; height:18px;
  background: linear-gradient(180deg, var(--pink2), var(--pink));
  transform: translateY(-50%) rotate(0deg);
}
.ribbon-left{ left:-18px; clip-path: polygon(100% 0, 0 50%, 100% 100%); border-radius:10px 0 0 10px;}
.ribbon-right{ right:-18px; clip-path: polygon(0 0, 100% 50%, 0 100%); border-radius:0 10px 10px 0;}
.hint{opacity:.85; font-size:14px} */

/* ===== CUTER GIFT BOW BUTTON ===== */
.bow-btn{
  position:relative;
  border:none;
  background:transparent;
  cursor:pointer;
  padding:26px 28px 24px;
  outline:none;
  transform: translateY(0);
  transition: transform .2s ease, filter .2s ease;
  -webkit-tap-highlight-color: transparent;
}

.bow-btn:hover{
  transform: translateY(-3px) scale(1.02);
  filter: drop-shadow(0 18px 35px rgba(255,111,177,.22));
}

.bow-btn:active{
  transform: translateY(-1px) scale(.99);
}

/* label text */
.bow-text{
  position:relative;
  z-index:5;
  display:inline-block;
  padding:12px 22px;
  border-radius:16px;
  font-weight:1000;
  letter-spacing:.02em;
  color:#2b0423;
  background: linear-gradient(180deg, rgba(255,167,204,1), rgba(255,111,177,1));
  box-shadow: 0 14px 40px rgba(255,111,177,.25);
  border: 1px solid rgba(255,255,255,.35);
}

/* subtle shine on label */
.bow-text::after{
  content:"";
  position:absolute;
  inset:1px;
  border-radius:14px;
  background: linear-gradient(120deg, rgba(255,255,255,.55), rgba(255,255,255,0) 55%);
  opacity:.28;
  pointer-events:none;
}

/* knot (center circle) */
/* .bow-knot{
  position:absolute;
  left:50%; top:46%;
  width:18px; height:18px;
  transform: translate(-50%, -50%);
  z-index:6;
  border-radius:999px;
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.85), rgba(255,255,255,0) 55%),
              linear-gradient(180deg, #ff9dcb, #ff4f9c);
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
  border: 1px solid rgba(255,255,255,.35);
} */

/* bow loops */
.bow-loop{
  position:absolute;
  top:50%;
  width:34px; height:26px;
  transform: translateY(-50%);
  z-index:4;
  background: linear-gradient(180deg, #ffb7d8, #ff6fb1);
  border: 1px solid rgba(255,255,255,.30);
  box-shadow: 0 12px 25px rgba(0,0,0,.12);
}

.bow-loop.left{
  left:8px;
  border-radius: 18px 10px 18px 18px;
  transform: translateY(-50%) rotate(-10deg);
  clip-path: polygon(0 50%, 22% 12%, 100% 0, 86% 50%, 100% 100%, 22% 88%);
}
.bow-loop.right{
  right:8px;
  border-radius: 10px 18px 18px 18px;
  transform: translateY(-50%) rotate(10deg);
  clip-path: polygon(100% 50%, 78% 12%, 0 0, 14% 50%, 0 100%, 78% 88%);
}

/* tails */
.bow-tail{
  position:absolute;
  top:50%;
  width:22px; height:18px;
  transform: translateY(18px);
  z-index:3;
  background: linear-gradient(180deg, #ffb7d8, #ff6fb1);
  border: 1px solid rgba(255,255,255,.25);
  box-shadow: 0 10px 20px rgba(0,0,0,.10);
  opacity:.95;
}

.bow-tail.left{
  left:18px;
  border-radius: 10px;
  clip-path: polygon(0 0, 100% 0, 70% 55%, 100% 100%, 0 100%, 22% 55%);
  transform: translateY(26px) rotate(8deg);
}
.bow-tail.right{
  right:18px;
  border-radius: 10px;
  clip-path: polygon(0 0, 100% 0, 78% 55%, 100% 100%, 0 100%, 30% 55%);
  transform: translateY(26px) rotate(-8deg);
}

/* cute idle animation */
.bow-btn{
  animation: bowFloat 2.2s ease-in-out infinite;
}
@keyframes bowFloat{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-3px); }
}

/* tiny sparkle */
.bow-btn::after{
  content:"";
  position:absolute;
  left:50%; top:0;
  width:120px; height:60px;
  transform: translateX(-50%);
  background: radial-gradient(circle at 20% 60%, rgba(255,255,255,.6), transparent 35%),
              radial-gradient(circle at 70% 30%, rgba(255,255,255,.45), transparent 38%),
              radial-gradient(circle at 55% 85%, rgba(255,255,255,.35), transparent 42%);
  opacity:.25;
  pointer-events:none;
  filter: blur(.2px);
}


/* envelope open animation (legacy) */
.envelope.lift{ transform: translateY(-8px); }

/* --- DRAMATIC ENVELOPE OPEN --- */
.envelope.open{
  animation: envShake .25s ease-in-out 1, envFloat 1.2s ease-in-out .25s forwards;
}

@keyframes envShake{
  0%{ transform: translateY(-8px) rotate(0deg); }
  25%{ transform: translateY(-10px) rotate(-1.5deg); }
  50%{ transform: translateY(-8px) rotate(1.5deg); }
  75%{ transform: translateY(-10px) rotate(-1deg); }
  100%{ transform: translateY(-8px) rotate(0deg); }
}

@keyframes envFloat{
  0%{ transform: translateY(-8px) scale(1); }
  60%{ transform: translateY(-14px) scale(1.02); }
  100%{ transform: translateY(-10px) scale(1.01); }
}

/* flap lebih dramatis */
.envelope.open .envelope-flap{
  transform: rotateX(185deg);
  transition-timing-function: cubic-bezier(.2,.9,.2,1);
}

/* surat naik dramatis + bounce */
.envelope.open .envelope-letter{
  animation: letterRise 1s cubic-bezier(.15,.95,.2,1) forwards;
}

@keyframes letterRise{
  0%{ transform: translateY(36px) scale(.98); }
  55%{ transform: translateY(-34px) scale(1.02); }
  75%{ transform: translateY(-22px) scale(1.01); }
  100%{ transform: translateY(-26px) scale(1.01); }
}

/* glow pas kebuka */
.envelope.open .envelope-back{
  box-shadow: 0 18px 70px rgba(0,0,0,.35), 0 0 60px rgba(255,111,177,.18);
}

/* ---------- PAGE 2 ---------- */
#page2{
  background: radial-gradient(900px 500px at 50% 20%, #241248 0%, #120b22 55%, #07040a 100%);
}
.bg-stars{
  position:absolute; inset:0;
  background-image:
    radial-gradient(rgba(255,255,255,.25) 1px, transparent 1px);
  background-size: 26px 26px;
  opacity:.22;
}
.cake-scene{
  position:relative;
  width:min(520px, 92vw);
  text-align:center;
  z-index:2;
}
.title{
  font-size:20px;
  font-weight:800;
  margin-bottom:18px;
}
.cake{
  position:relative;
  width:280px;
  height:260px;
  margin:0 auto;
  transform: translateY(320px);
  animation: cakeUp 1.1s cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes cakeUp{
  to{ transform: translateY(0); }
}
.cake-plate{
  position:absolute;
  left:50%; bottom:0;
  width:320px; height:28px;
  transform: translateX(-50%);
  background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.18);
  border-radius:999px;
}
.cake-body{
  position:absolute;
  left:50%; bottom:24px;
  width:260px; height:150px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, #ffd6e8, #ff8ec5);
  border-radius: 28px;
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
}
.cake-top{
  position:absolute;
  left:50%; bottom:150px;
  width:260px; height:60px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, #fff, #ffd6e8);
  border-radius: 28px 28px 18px 18px;
  border:1px solid rgba(255,255,255,.25);
}

/* candles */
.candles{
  position:absolute;
  left:50%; bottom:150px;
  transform: translateX(-50%);
  width:240px;
  display:flex;
  justify-content:space-between;
  padding:0 6px;
  opacity:0;
  animation: candlesIn .8s ease forwards;
  animation-delay: 1.0s;
}
@keyframes candlesIn{
  to{ opacity:1; }
}
.candle{
  position:relative;
  width:16px;
  height:70px;
  background: linear-gradient(180deg, #ffeef7, #ffb9d7);
  border-radius:10px;
  transform: translateY(50px);
  animation: candlePlant .7s cubic-bezier(.2,.9,.2,1) forwards;
}
.candle:nth-child(1){animation-delay:1.1s}
.candle:nth-child(2){animation-delay:1.2s}
.candle:nth-child(3){animation-delay:1.3s}
.candle:nth-child(4){animation-delay:1.4s}
.candle:nth-child(5){animation-delay:1.5s}

@keyframes candlePlant{
  to{ transform: translateY(0); }
}
.wick{
  position:absolute;
  left:50%; top:-10px;
  width:2px; height:10px;
  transform: translateX(-50%);
  background:#2a1b20;
  border-radius:2px;
}

/* flame */
.flame{
  position:absolute;
  left:50%; top:-34px;
  width:16px; height:26px;
  transform: translateX(-50%);
  background: radial-gradient(circle at 40% 35%, #fff 0 25%, #ffd1a8 26% 55%, #ff7b2f 56% 78%, #ff2d6f 79% 100%);
  border-radius: 50% 50% 50% 50%;
  filter: drop-shadow(0 0 12px rgba(255,180,80,.35));
  cursor:pointer;
  animation: flicker .18s infinite alternate ease-in-out, flameOn .4s ease forwards;
  opacity:0;
}
@keyframes flameOn{ to{ opacity:1; } }
@keyframes flicker{
  from{ transform: translateX(-50%) scale(1) rotate(-2deg); }
  to{ transform: translateX(-50%) scale(1.06) rotate(2deg); }
}
.flame.off{
  opacity:0;
  animation:none;
  pointer-events:none;
}

/* bonus pop */
.flame:active{
  transform: translateX(-50%) scale(.92);
}

/* --- SMOKE PUFF EFFECT --- */
.flame::after{
  content:"";
  position:absolute;
  left:50%;
  top:30%;
  width:10px;
  height:10px;
  transform: translate(-50%, -50%) scale(.6);
  background: radial-gradient(circle, rgba(255,255,255,.85) 0 35%, rgba(255,255,255,.15) 60%, transparent 70%);
  opacity:0;
  filter: blur(.2px);
  pointer-events:none;
}
.flame.puff::after{
  animation: smokePuff .55s ease-out forwards;
}
@keyframes smokePuff{
  0%{
    opacity:.0;
    transform: translate(-50%, -50%) scale(.6);
  }
  25%{
    opacity:.75;
    transform: translate(-50%, -75%) scale(1.2);
  }
  60%{
    opacity:.35;
    transform: translate(-50%, -120%) scale(1.8);
  }
  100%{
    opacity:0;
    transform: translate(-50%, -160%) scale(2.4);
  }
}

.counter{ margin-top:16px; opacity:.9; font-weight:700; }
.hint2{ margin-top:8px; opacity:.8; font-size:14px; }

/* ---------- PAGE 3 ---------- */
#page3{
  background: radial-gradient(1000px 600px at 50% 20%, #2c1034 0%, #140614 60%, #07040a 100%);
}
#confetti{
  position:absolute; inset:0;
}
.ticket-wrap{
  position:relative;
  z-index:2;
  width:min(520px, 92vw);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}
.ticket{
  width: min(460px, 92vw);
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 22px;
  padding:18px;
  box-shadow: 0 20px 70px rgba(0,0,0,.35);
  backdrop-filter: blur(10px);

  transform: scale(.85) rotate(-2deg);
  opacity:0;
  animation: ticketPop .8s cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes ticketPop{
  to{ transform: scale(1) rotate(0deg); opacity:1; }
}
.ticket-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.ticket-badge{
  padding:8px 12px;
  border-radius:999px;
  background: linear-gradient(180deg, rgba(255,167,204,.95), rgba(255,111,177,.85));
  color:#2b0423;
  font-weight:900;
  font-size:12px;
}
.ticket-title{ font-weight:900; font-size:18px; opacity:.95; }
.ticket-line{
  height:1px;
  background: rgba(255,255,255,.22);
  margin:14px 0;
}
.ticket-text .big{ font-size:22px; font-weight:900; }
.ticket-text .place{ font-size:28px; font-weight:1000; letter-spacing:.02em; margin-top:2px; }
.ticket-text .when{ opacity:.85; margin-top:6px; }
.ticket-bottom{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:14px;
  gap:12px;
}
.code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas;
  opacity:.9;
}
.soft-btn{
  border:none;
  padding:10px 14px;
  border-radius:14px;
  background: rgba(255,255,255,.14);
  color: #fff;
  font-weight:800;
  cursor:pointer;
}
.soft-btn:hover{ background: rgba(255,255,255,.20); }
.final-note{opacity:.9; font-weight:700; text-align:center}
